<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}DBA Portal{% endblock %}</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <!-- Google Font (Significa-like) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet"
  >

  <!-- Custom Navbar CSS -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/navbar.css') }}"
  >
</head>
<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container-fluid">

    <!-- Brand -->
    <a class="navbar-brand"
       href="{{ url_for('main.dashboard') }}">
      DBA Portal
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarMain">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarMain">

      {% if current_user.is_authenticated %}

      <!-- LEFT MENU -->
      <ul class="navbar-nav me-auto">

        <!-- Dashboard -->
        <li class="nav-item">
          <a class="nav-link
            {% if request.endpoint == 'main.dashboard' %}active{% endif %}"
             href="{{ url_for('main.dashboard') }}">
            Dashboard
          </a>
        </li>

        <!-- DBA Assets Dropdown -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"
             href="#"
             role="button"
             data-bs-toggle="dropdown">
              DBA Assets
          </a>

          <ul class="dropdown-menu">

            <a class="dropdown-item
              {% if request.endpoint in ['assets.hard_disk_list', 'assets.hard_disk_upload'] %}active{% endif %}"
                href="{{ url_for('assets.hard_disk_list') }}">
                Hard Disk Cold Storage
            </a>


            <li>
              <a class="dropdown-item"
                 href="{{ url_for('assets.server_list') }}">
                Server Prodcution Assets
              </a>
            </li>

            <li>
              <a class="dropdown-item disabled">
                More coming soon
              </a>
            </li>

          </ul>
        </li>

      </ul>

      <!-- RIGHT MENU -->
      <ul class="navbar-nav ms-auto align-items-center">

        <!-- Greeting -->
        <li class="nav-item me-3 d-none d-lg-block">
          <span class="navbar-text text-light small"
                id="greeting-text"
                data-fullname="{{ current_user.full_name }}">
          </span>


        </li>

        <!-- User Dropdown -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"
             href="#"
             role="button"
             data-bs-toggle="dropdown">
            {{ current_user.username }}
          </a>

          <ul class="dropdown-menu dropdown-menu-end">

            <li>
              <span class="dropdown-item-text text-muted">
                {{ current_user.role }}
              </span>
            </li>

            <li><hr class="dropdown-divider"></li>

            <li>
              <a class="dropdown-item
                {% if request.endpoint == 'auth.change_password' %}active{% endif %}"
                 href="{{ url_for('auth.change_password') }}">
                Change Password
              </a>
            </li>

            {% if current_user.is_admin() %}
            <li>
              <a class="dropdown-item"
                 href="{{ url_for('admin.users') }}">
                User Management
              </a>
            </li>
            {% endif %}

            <li><hr class="dropdown-divider"></li>

            <li>
              <a class="dropdown-item text-danger"
                 href="{{ url_for('auth.logout') }}">
                Logout
              </a>
            </li>

          </ul>
        </li>

      </ul>

      {% endif %}
    </div>
  </div>
</nav>

<!-- ================= PAGE CONTENT ================= -->
<div class="container mt-4 mb-5">
  {% block content %}
  {% endblock %}
</div>

<!-- ================= FOOTER ================= -->
<footer class="app-footer fixed-bottom">
  <div class="container-fluid py-2">
    <div class="row small align-items-center">

      <div class="col-md-6">
        © {{ current_year | default(2026) }} BRI Insurance · Database Administrator
      </div>

      <div class="col-md-6 text-md-end d-none d-md-block">
          Version: <strong>V1.0</strong>
          <span class="ms-3 footer-clock" id="footerClock"
                data-server-time="{{ server_time }}">
          </span>
      </div>


    </div>
  </div>
</footer>


<!-- ================= JS ================= -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
</script>

<!-- Custom Navbar JS -->
<script
  src="{{ url_for('static', filename='js/navbar.js') }}">
</script>

</body>
</html>
